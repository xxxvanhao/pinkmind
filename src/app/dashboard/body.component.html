<div class="container mb-5">
    <div id="header">
        <p class="content-header text-center" *ngIf="userService.userDetails">
            <i class="far fa-building"></i> {{userService.userDetails.spaceID}}
        </p>
    </div>
    <div class="new-project">
        <h6>Get started with your new project!</h6>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6 content-project">
                    <div class="row flex-nowrap my-3">
                        <div class="col-md-3 text-center">
                            <div class="radius-avatar"><i class="avatar fa fa-tasks" aria-hidden="true"></i></div>
                        </div>
                        <div class="col-md-9 pl-0">
                            <a href="javascript:void(0)">Add project</a>
                            <p class="message">First, add a project that you would like to work on.</p>
                            <br>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addForm">
                                    Add
                                  </button>
                            <!-- Modal -->
                            <form #formProject="ngForm" autocomplete="off" (submit)="onSubmit(formProject)">
                                <div class="modal fade" id="addForm" tabindex="-1" role="dialog" aria-labelledby="addFormTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content model-fix">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Add Project</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
                                            </div>
                                            <div class="modal-body">
                                                <label for="name">Project name</label>
                                                <input type="text" name="name" ngModel #name="ngModel" required minlength="3" maxlength="25" class="input-fix d-flex mb-3 px-2">
                                                <label for="id">Project key</label>
                                                <input type="text " name="id" ngModel #id="ngModel" required minlength="3" maxlength="5" class="input-fix d-flex mb-1 px-2">
                                                <p>The project key is a unique identifier for a project. A short, concise key is recommended.</p>
                                                <p>(e.g. Project name Backlog has project key BLG_2) Uppercase letters (A-Z), numbers (0-9) and underscore (_) can be used.</p>
                                            </div>
                                            <div class="modal-footer ">
                                                <button type="button " class="btn btn-secondary" data-dismiss="modal" onclick="this.getElementById('addForm').display='none'">Close</button>
                                                <button type="submit" class="btn btn-primary" [disabled]="formProject.invalid">Add</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 content-project ">
                    <div class="row flex-nowrap my-3 ">
                        <div class="col-md-3 text-center ">
                            <div class="radius-avatar "><i class="avatar fas fa-user "></i></div>
                        </div>
                        <div class="col-md-9 pl-0 ">
                            <a href="javascript:void(0)">Add User</a>
                            <p class="message ">Invite members to this Space to work on your projects with you.</p>
                            <button type="button " class="btn btn-success add-user" data-toggle="modal" data-target="#openAddUser">Add</button>
                            <div class="modal fade" id="openAddUser" tabindex="-1" role="dialog" aria-labelledby="openAddUserTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content model-fix">
                                        <div class="modal-header">
                                            <h5 class="modal-title">Add User</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
                                        </div>
                                        <div class="modal-body">
                                            <input type="text" value="test" class="input-fix refId d-flex mb-0 px-2" readonly>
                                            <small>Coppy this link end send for your friends</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main ">
        <div class="row main-body">
            <div class="col-md-6 ">
                <div class="timeline-wraper ">
                    <h5>Recent Updates</h5>
                    <div class="timeline-content ">
                        <div *ngIf="(userService.listDateReUpdate | keyvalue)?.length> 0; else notShowTimeLine">
                            <div class="timeline" *ngFor="let ut of userService.listDateReUpdate">
                                <h6 class=" timeline-date ">{{ut}}</h6>
                                <div class="display-content" *ngFor="let lud of userService.listReUpdate">
                                    <div class="row" *ngIf="(lud.updateTime | date: 'MM/dd/yyyy' ) == (ut | date: 'MM/dd/yyyy')">
                                        <div class="col-md-2 text-center timeline-avatar ">
                                            <img class="avatarProfile" src="{{lud.avatarPath}}">
                                        </div>
                                        <div class="col-md-7 pl-0 py-2 ">
                                            <div class="title-recent">
                                                <span class="fn">{{lud.userName}}</span>
                                                <span [innerHTML]="lud.actionName"></span>
                                            </div>
                                            <div class="action-content ">
                                                <a class="issue-key mr-1 " href="#">{{lud.issueKey}}</a>
                                                <span class="subject ">{{lud.subject}}</span>
                                                <div class="content " [innerHTML]="lud.content"></div>
                                                <div class="attachment-file "></div>
                                            </div>
                                            <div class="file "></div>
                                        </div>
                                        <div class="col-md-3 d-flex justify-content-end py-2 ">
                                            <span class="timeAgo ">{{lud.updateTime | timeago: live}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <ng-template #notShowTimeLine>
                            <div class="isNo-items timeline"><span>There are no update.<br>Recently update will be listed here.</span></div>
                        </ng-template>
                    </div>
                </div>
            </div>
            <div class="col-md-6 ">
                <div class="project ">
                    <h5>Projects</h5>
                    <div class="project-list ">

                        <div class="isNo-items " *ngIf="!(userService.listProject | keyvalue)?.length> 0; else notShow"><span>There are no project<br>Projects assigned to you will be listed here.</span></div>
                        <ng-template #notShow></ng-template>

                        <div class="project-content" *ngFor="let p of userService.listProject">
                            <div href="# " class="row flex-nowrap align-items-center ">
                                <div class="col-md-2 pl-0 text-center ">
                                    <i class="far fa-building fix-fa-building"></i>
                                </div>
                                <div class="col-md-10 pl-0 ">
                                    <p class="project-name mb-0 mt-2 ">{{ p.name}}</p>
                                    <p class="project-key mb-2 ">{{ p.id}}</p>
                                </div>
                            </div>
                            <a [routerLink]="['/projects/home',p.id]" class="blockLink "></a>
                        </div>
                    </div>
                </div>
                <div class="issue ">
                    <h5>My Issues</h5>
                    <div class="issue-table ">
                        <div class="issue-menu ">
                            <p id="if-click" class="mb-0">
                                <span class="is-filter ">Filters:</span>
                                <button type="button" (click)="ifSubmit('Assigned')" class="is-item if-active">Assigned to me</button>
                                <button type="button" (click)="ifSubmit('Created')" class="is-item ">Created by me</button>
                            </p>
                            <p id="idd-click" class="mb-0">
                                <span class="is-dueDate ">Due date:</span>
                                <button type="button" (click)="iddSubmit('all')" class="is-item idd-active">All</button>
                                <button type="button" (click)="iddSubmit('fourDay')" class="is-item ">4days</button>
                                <button type="button" (click)="iddSubmit('dueToday')" class="is-item ">Due Today</button>
                                <button type="button" (click)="iddSubmit('overDue')" class="is-item ">Overdue</button>
                            </p>
                        </div>
                        <table>
                            <thead class="issue-thead text-center">
                                <tr>
                                    <th>Key</th>
                                    <th>Subject</th>
                                    <th>Priority</th>
                                    <th>Status</th>
                                    <th>Due</th>
                                </tr>
                            </thead>
                            <tbody class="issue-tbody " align="center">
                                <tr class="tr-body" *ngFor="let item of userService.issueDetails">
                                    <td><a href="/projects/view/{{item.id}}">{{item.key}}</a></td>
                                    <td class="text-left">{{item.subject}}</td>
                                    <td>{{item.priorityName}}</td>
                                    <td><span class="status">{{item.statusName}}</span></td>
                                    <td>{{item.dueDate | date : 'MMM .dd'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>