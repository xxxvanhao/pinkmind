(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators')) :
    typeof define === 'function' && define.amd ? define('ngx-timeago', ['exports', '@angular/core', 'rxjs', 'rxjs/operators'], factory) :
    (factory((global['ngx-timeago'] = {}),global.ng.core,global.rxjs,global.rxjs.operators));
}(this, (function (exports,core,rxjs,operators) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b)
            if (b.hasOwnProperty(p))
                d[p] = b[p]; };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }
    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m)
            return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
        }
        catch (error) {
            e = { error: error };
        }
        finally {
            try {
                if (r && !r.done && (m = i["return"]))
                    m.call(i);
            }
            finally {
                if (e)
                    throw e.error;
            }
        }
        return ar;
    }
    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @param {?} value
     * @return {?}
     */
    function isDefined(value) {
        return typeof value !== 'undefined' && value !== null;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    function coerceBooleanProperty(value) {
        return value != null && "" + value !== 'false';
    }
    /**
     * @param {?} date
     * @return {?}
     */
    function dateParser(date) {
        var /** @type {?} */ parsed = new Date(date);
        if (!Number.isNaN(parsed.valueOf())) {
            return parsed;
        }
        var /** @type {?} */ parts = String(date).match(/\d+/g);
        if (parts === null || parts.length <= 2) {
            return parsed;
        }
        else {
            var _a = __read(parts.map(function (x) { return parseInt(x, 10); })), firstP = _a[0], secondP = _a[1], restPs = _a.slice(2);
            return new Date(Date.UTC.apply(Date, __spread([firstP, secondP - 1], restPs)));
        }
    }
    var /** @type {?} */ MINUTE = 60;
    var /** @type {?} */ HOUR = MINUTE * 60;
    var /** @type {?} */ DAY = HOUR * 24;
    var /** @type {?} */ WEEK = DAY * 7;
    var /** @type {?} */ MONTH = DAY * 30;
    var /** @type {?} */ YEAR = DAY * 365;

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ TimeagoClock = (function () {
        function TimeagoClock() {
        }
        return TimeagoClock;
    }());
    var TimeagoDefaultClock = (function (_super) {
        __extends(TimeagoDefaultClock, _super);
        function TimeagoDefaultClock() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @param {?} then
         * @return {?}
         */
        TimeagoDefaultClock.prototype.tick = /**
         * @param {?} then
         * @return {?}
         */
            function (then) {
                return rxjs.of(0)
                    .pipe(operators.expand(function () {
                    var /** @type {?} */ now = Date.now();
                    var /** @type {?} */ seconds = Math.round(Math.abs(now - then) / 1000);
                    var /** @type {?} */ period = seconds < MINUTE
                        ? 1000
                        : seconds < HOUR
                            ? 1000 * MINUTE
                            : seconds < DAY
                                ? 1000 * HOUR
                                : 0;
                    return period ? rxjs.timer(period) : rxjs.empty();
                }), operators.skip(1));
            };
        TimeagoDefaultClock.decorators = [
            { type: core.Injectable },
        ];
        return TimeagoDefaultClock;
    }(TimeagoClock));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * To modify the text displayed, create a new instance of TimeagoIntl and
     * include it in a custom provider
     */
    var TimeagoIntl = (function () {
        function TimeagoIntl() {
            /**
             * Stream that emits whenever the l10n strings are changed
             * Use this to notify directives if the l10n strings have changed after initialization.
             */
            this.changes = new rxjs.Subject();
        }
        TimeagoIntl.decorators = [
            { type: core.Injectable },
        ];
        return TimeagoIntl;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ defaultFormattter = function (then) {
        var /** @type {?} */ now = Date.now();
        var /** @type {?} */ seconds = Math.round(Math.abs(now - then) / 1000);
        var /** @type {?} */ suffix = then < now ? 'ago' : 'from now';
        var _a = __read(seconds < MINUTE
            ? [Math.round(seconds), 'second']
            : seconds < HOUR
                ? [Math.round(seconds / MINUTE), 'minute']
                : seconds < DAY
                    ? [Math.round(seconds / HOUR), 'hour']
                    : seconds < WEEK
                        ? [Math.round(seconds / DAY), 'day']
                        : seconds < MONTH
                            ? [Math.round(seconds / WEEK), 'week']
                            : seconds < YEAR
                                ? [Math.round(seconds / MONTH), 'month']
                                : [Math.round(seconds / YEAR), 'year'], 2), value = _a[0], unit = _a[1];
        return { value: value, unit: unit, suffix: suffix };
    };
    /**
     * @abstract
     */
    var /**
     * @abstract
     */ TimeagoFormatter = (function () {
        function TimeagoFormatter() {
        }
        return TimeagoFormatter;
    }());
    var TimeagoDefaultFormatter = (function (_super) {
        __extends(TimeagoDefaultFormatter, _super);
        function TimeagoDefaultFormatter() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @param {?} then
         * @return {?}
         */
        TimeagoDefaultFormatter.prototype.format = /**
         * @param {?} then
         * @return {?}
         */
            function (then) {
                var _a = defaultFormattter(then), suffix = _a.suffix, value = _a.value, unit = _a.unit;
                return this.parse(value, unit, suffix);
            };
        /**
         * @param {?} value
         * @param {?} unit
         * @param {?} suffix
         * @return {?}
         */
        TimeagoDefaultFormatter.prototype.parse = /**
         * @param {?} value
         * @param {?} unit
         * @param {?} suffix
         * @return {?}
         */
            function (value, unit, suffix) {
                if (value !== 1) {
                    unit += 's';
                }
                return value + ' ' + unit + ' ' + suffix;
            };
        TimeagoDefaultFormatter.decorators = [
            { type: core.Injectable },
        ];
        return TimeagoDefaultFormatter;
    }(TimeagoFormatter));
    var TimeagoCustomFormatter = (function (_super) {
        __extends(TimeagoCustomFormatter, _super);
        function TimeagoCustomFormatter(intl) {
            var _this = _super.call(this) || this;
            _this.intl = intl;
            return _this;
        }
        /**
         * @param {?} then
         * @return {?}
         */
        TimeagoCustomFormatter.prototype.format = /**
         * @param {?} then
         * @return {?}
         */
            function (then) {
                var _a = defaultFormattter(then), suffix = _a.suffix, value = _a.value, unit = _a.unit;
                return this.parse(value, unit, suffix, Date.now(), then);
            };
        /**
         * @param {?} value
         * @param {?} unit
         * @param {?} suffix
         * @param {?} now
         * @param {?} then
         * @return {?}
         */
        TimeagoCustomFormatter.prototype.parse = /**
         * @param {?} value
         * @param {?} unit
         * @param {?} suffix
         * @param {?} now
         * @param {?} then
         * @return {?}
         */
            function (value, unit, suffix, now, then) {
                /** convert weeks to days if strings don't handle weeks */
                if (unit === 'week' && !this.intl.strings.week && !this.intl.strings.weeks) {
                    var /** @type {?} */ days = Math.round(Math.abs(now - then) / (1000 * 60 * 60 * 24));
                    value = days;
                    unit = 'day';
                }
                /**
                 * create a normalize function for given value
                 */
                var /** @type {?} */ normalize = this.normalizeFn(value, now - then, this.intl.strings.numbers);
                /**
                 * The eventual return value stored in an array so that the wordSeparator can be used
                 */
                var /** @type {?} */ dateString = [];
                /** handle prefixes */
                if (suffix === 'ago' && this.intl.strings.prefixAgo) {
                    dateString.push(normalize(this.intl.strings.prefixAgo));
                }
                if (suffix === 'from now' && this.intl.strings.prefixFromNow) {
                    dateString.push(normalize(this.intl.strings.prefixFromNow));
                }
                /**
                 * Handle Main number and unit
                 */
                var /** @type {?} */ isPlural = value > 1;
                if (isPlural) {
                    var /** @type {?} */ stringFn = this.intl.strings[unit + 's'] || this.intl.strings[unit] || '%d ' + unit;
                    dateString.push(normalize(stringFn));
                }
                else {
                    var /** @type {?} */ stringFn = this.intl.strings[unit] || this.intl.strings[unit + 's'] || '%d ' + unit;
                    dateString.push(normalize(stringFn));
                }
                /** Handle Suffixes */
                if (suffix === 'ago' && this.intl.strings.suffixAgo) {
                    dateString.push(normalize(this.intl.strings.suffixAgo));
                }
                if (suffix === 'from now' && this.intl.strings.suffixFromNow) {
                    dateString.push(normalize(this.intl.strings.suffixFromNow));
                }
                /**
                 * join the array into a string and return it
                 */
                var /** @type {?} */ wordSeparator = typeof this.intl.strings.wordSeparator === 'string' ? this.intl.strings.wordSeparator : ' ';
                return dateString.join(wordSeparator);
            };
        /**
         * If the numbers array is present, format numbers with it,
         * otherwise just cast the number to a string and return it
         * @param {?} numbers
         * @param {?} value
         * @return {?}
         */
        TimeagoCustomFormatter.prototype.normalizeNumber = /**
         * If the numbers array is present, format numbers with it,
         * otherwise just cast the number to a string and return it
         * @param {?} numbers
         * @param {?} value
         * @return {?}
         */
            function (numbers, value) {
                return numbers && numbers.length === 10
                    ? String(value).split('')
                        .map(function (digit) { return digit.match(/^[0-9]$/) ? numbers[parseInt(digit, 10)] : digit; })
                        .join('')
                    : String(value);
            };
        /**
         * Take a string or a function that takes number of days and returns a string
         * and provide a uniform API to create string parts
         * @param {?} value
         * @param {?} millisDelta
         * @param {?=} numbers
         * @return {?}
         */
        TimeagoCustomFormatter.prototype.normalizeFn = /**
         * Take a string or a function that takes number of days and returns a string
         * and provide a uniform API to create string parts
         * @param {?} value
         * @param {?} millisDelta
         * @param {?=} numbers
         * @return {?}
         */
            function (value, millisDelta, numbers) {
                var _this = this;
                return function (stringOrFn) {
                    return typeof stringOrFn === 'function'
                        ? stringOrFn(value, millisDelta).replace(/%d/g, _this.normalizeNumber(numbers, value))
                        : stringOrFn.replace(/%d/g, _this.normalizeNumber(numbers, value));
                };
            };
        TimeagoCustomFormatter.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        TimeagoCustomFormatter.ctorParameters = function () {
            return [
                { type: TimeagoIntl }
            ];
        };
        return TimeagoCustomFormatter;
    }(TimeagoFormatter));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var TimeagoDirective = (function () {
        function TimeagoDirective(intl, cd, formatter, element, clock) {
            var _this = this;
            this.cd = cd;
            this.clock = clock;
            /**
             * Emits on:
             * - Input change
             * - Intl change
             * - Clock tick
             */
            this.stateChanges = new rxjs.Subject();
            this._live = true;
            if (intl) {
                this.intlSubscription = intl.changes.subscribe(function () { return _this.stateChanges.next(); });
            }
            this.stateChanges.subscribe(function () {
                _this.setContent(element.nativeElement, formatter.format(_this.date));
                _this.cd.markForCheck();
            });
        }
        Object.defineProperty(TimeagoDirective.prototype, "date", {
            /** The Date to display. An actual Date object or something that can be fed to new Date. */
            get: /**
             * The Date to display. An actual Date object or something that can be fed to new Date.
             * @return {?}
             */ function () {
                return this._date;
            },
            set: /**
             * @param {?} date
             * @return {?}
             */ function (date) {
                var _this = this;
                this._date = dateParser(date).valueOf();
                if (this._date) {
                    if (this.clockSubscription) {
                        this.clockSubscription.unsubscribe();
                        this.clockSubscription = undefined;
                    }
                    this.clockSubscription = this.clock.tick(date)
                        .pipe(operators.filter(function () { return _this.live; }, this))
                        .subscribe(function () { return _this.stateChanges.next(); });
                }
                else {
                    throw new SyntaxError("Wrong parameter in TimeagoDirective. Expected a valid date, received: " + date);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(TimeagoDirective.prototype, "live", {
            /** If the directive should update itself over time */
            get: /**
             * If the directive should update itself over time
             * @return {?}
             */ function () {
                return this._live;
            },
            set: /**
             * @param {?} live
             * @return {?}
             */ function (live) {
                this._live = coerceBooleanProperty(live);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} changes
         * @return {?}
         */
        TimeagoDirective.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
            function (changes) {
                this.stateChanges.next();
            };
        /**
         * @param {?} node
         * @param {?} content
         * @return {?}
         */
        TimeagoDirective.prototype.setContent = /**
         * @param {?} node
         * @param {?} content
         * @return {?}
         */
            function (node, content) {
                if (isDefined(node.textContent)) {
                    node.textContent = content;
                }
                else {
                    node.data = content;
                }
            };
        /**
         * @return {?}
         */
        TimeagoDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.intlSubscription) {
                    this.intlSubscription.unsubscribe();
                    this.intlSubscription = undefined;
                }
                if (this.clockSubscription) {
                    this.clockSubscription.unsubscribe();
                    this.clockSubscription = undefined;
                }
                this.stateChanges.complete();
            };
        TimeagoDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[timeago]',
                        exportAs: 'timeago',
                    },] },
        ];
        /** @nocollapse */
        TimeagoDirective.ctorParameters = function () {
            return [
                { type: TimeagoIntl, decorators: [{ type: core.Optional }] },
                { type: core.ChangeDetectorRef },
                { type: TimeagoFormatter },
                { type: core.ElementRef },
                { type: TimeagoClock }
            ];
        };
        TimeagoDirective.propDecorators = {
            date: [{ type: core.Input }],
            live: [{ type: core.Input }]
        };
        return TimeagoDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var TimeagoPipe = (function () {
        function TimeagoPipe(intl, cd, formatter, clock) {
            var _this = this;
            this.formatter = formatter;
            this.clock = clock;
            this.live = true;
            /**
             * Emits on:
             * - Input change
             * - Intl change
             * - Clock tick
             */
            this.stateChanges = new rxjs.Subject();
            if (intl) {
                this.intlSubscription = intl.changes.subscribe(function () { return _this.stateChanges.next(); });
            }
            this.stateChanges.subscribe(function () {
                _this.value = formatter.format(_this.date);
                cd.markForCheck();
            });
        }
        /**
         * @param {?} date
         * @param {...?} args
         * @return {?}
         */
        TimeagoPipe.prototype.transform = /**
         * @param {?} date
         * @param {...?} args
         * @return {?}
         */
            function (date) {
                var _this = this;
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var /** @type {?} */ _date = dateParser(date).valueOf();
                var /** @type {?} */ _live;
                _live = isDefined(args[0])
                    ? coerceBooleanProperty(args[0])
                    : this.live;
                if (this.date === _date && this.live === _live) {
                    return this.value;
                }
                this.date = _date;
                this.live = _live;
                if (this.date) {
                    if (this.clockSubscription) {
                        this.clockSubscription.unsubscribe();
                        this.clockSubscription = undefined;
                    }
                    this.clockSubscription = this.clock.tick(date)
                        .pipe(operators.filter(function () { return _this.live; }, this))
                        .subscribe(function () { return _this.stateChanges.next(); });
                    this.stateChanges.next();
                }
                else {
                    throw new SyntaxError("Wrong parameter in TimeagoPipe. Expected a valid date, received: " + date);
                }
                return this.value;
            };
        /**
         * @return {?}
         */
        TimeagoPipe.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.intlSubscription) {
                    this.intlSubscription.unsubscribe();
                    this.intlSubscription = undefined;
                }
                if (this.clockSubscription) {
                    this.clockSubscription.unsubscribe();
                    this.clockSubscription = undefined;
                }
                this.stateChanges.complete();
            };
        TimeagoPipe.decorators = [
            { type: core.Injectable },
            { type: core.Pipe, args: [{
                        name: 'timeago',
                        pure: false,
                    },] },
        ];
        /** @nocollapse */
        TimeagoPipe.ctorParameters = function () {
            return [
                { type: TimeagoIntl, decorators: [{ type: core.Optional }] },
                { type: core.ChangeDetectorRef },
                { type: TimeagoFormatter },
                { type: TimeagoClock }
            ];
        };
        return TimeagoPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var TimeagoModule = (function () {
        function TimeagoModule() {
        }
        /**
         * Use this method in your root module to provide the TimeagoModule
         */
        /**
         * Use this method in your root module to provide the TimeagoModule
         * @param {?=} config
         * @return {?}
         */
        TimeagoModule.forRoot = /**
         * Use this method in your root module to provide the TimeagoModule
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: TimeagoModule,
                    providers: [
                        config.clock || { provide: TimeagoClock, useClass: TimeagoDefaultClock },
                        config.intl || [],
                        config.formatter || { provide: TimeagoFormatter, useClass: TimeagoDefaultFormatter },
                    ],
                };
            };
        /**
         * Use this method in your other (non root) modules to import the directive/pipe
         */
        /**
         * Use this method in your other (non root) modules to import the directive/pipe
         * @param {?=} config
         * @return {?}
         */
        TimeagoModule.forChild = /**
         * Use this method in your other (non root) modules to import the directive/pipe
         * @param {?=} config
         * @return {?}
         */
            function (config) {
                if (config === void 0) {
                    config = {};
                }
                return {
                    ngModule: TimeagoModule,
                    providers: [
                        config.clock || { provide: TimeagoClock, useClass: TimeagoDefaultClock },
                        config.intl || [],
                        config.formatter || { provide: TimeagoFormatter, useClass: TimeagoDefaultFormatter },
                    ],
                };
            };
        TimeagoModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [
                            TimeagoDirective,
                            TimeagoPipe,
                        ],
                        exports: [
                            TimeagoDirective,
                            TimeagoPipe,
                        ],
                    },] },
        ];
        return TimeagoModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.TimeagoDirective = TimeagoDirective;
    exports.TimeagoPipe = TimeagoPipe;
    exports.TimeagoIntl = TimeagoIntl;
    exports.TimeagoClock = TimeagoClock;
    exports.TimeagoDefaultClock = TimeagoDefaultClock;
    exports.TimeagoFormatter = TimeagoFormatter;
    exports.TimeagoDefaultFormatter = TimeagoDefaultFormatter;
    exports.TimeagoCustomFormatter = TimeagoCustomFormatter;
    exports.TimeagoModule = TimeagoModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRpbWVhZ28udW1kLmpzLm1hcCIsInNvdXJjZXMiOltudWxsLCJuZzovL25neC10aW1lYWdvL3V0aWwudHMiLCJuZzovL25neC10aW1lYWdvL3RpbWVhZ28uY2xvY2sudHMiLCJuZzovL25neC10aW1lYWdvL3RpbWVhZ28uaW50bC50cyIsIm5nOi8vbmd4LXRpbWVhZ28vdGltZWFnby5mb3JtYXR0ZXIudHMiLCJuZzovL25neC10aW1lYWdvL3RpbWVhZ28uZGlyZWN0aXZlLnRzIiwibmc6Ly9uZ3gtdGltZWFnby90aW1lYWdvLnBpcGUudHMiLCJuZzovL25neC10aW1lYWdvL3RpbWVhZ28ubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0geVtvcFswXSAmIDIgPyBcInJldHVyblwiIDogb3BbMF0gPyBcInRocm93XCIgOiBcIm5leHRcIl0pICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gWzAsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7ICB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpZiAob1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gaXNEZWZpbmVkKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBgJHt2YWx1ZX1gICE9PSAnZmFsc2UnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0ZVBhcnNlcihkYXRlOiBhbnkpOiBEYXRlIHtcbiAgY29uc3QgcGFyc2VkID0gbmV3IERhdGUoZGF0ZSk7XG4gIGlmICghTnVtYmVyLmlzTmFOKHBhcnNlZC52YWx1ZU9mKCkpKSB7XG4gICAgcmV0dXJuIHBhcnNlZDtcbiAgfVxuXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFN0cmluZyhkYXRlKS5tYXRjaCgvXFxkKy9nKTtcbiAgaWYgKHBhcnRzID09PSBudWxsIHx8IHBhcnRzLmxlbmd0aCA8PSAyKSB7XG4gICAgcmV0dXJuIHBhcnNlZDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbZmlyc3RQLCBzZWNvbmRQLCAuLi5yZXN0UHNdID0gcGFydHMubWFwKHggPT4gcGFyc2VJbnQoeCwgMTApKTtcbiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoZmlyc3RQLCBzZWNvbmRQIC0gMSwgLi4ucmVzdFBzKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IE1JTlVURSA9IDYwO1xuZXhwb3J0IGNvbnN0IEhPVVIgPSBNSU5VVEUgKiA2MDtcbmV4cG9ydCBjb25zdCBEQVkgPSBIT1VSICogMjQ7XG5leHBvcnQgY29uc3QgV0VFSyA9IERBWSAqIDc7XG5leHBvcnQgY29uc3QgTU9OVEggPSBEQVkgKiAzMDtcbmV4cG9ydCBjb25zdCBZRUFSID0gREFZICogMzY1O1xuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YsIGVtcHR5LCB0aW1lciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZXhwYW5kLCBza2lwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTUlOVVRFLCBIT1VSLCBEQVksIFdFRUssIE1PTlRILCBZRUFSIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRpbWVhZ29DbG9jayB7XG4gIGFic3RyYWN0IHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+O1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVGltZWFnb0RlZmF1bHRDbG9jayBleHRlbmRzIFRpbWVhZ29DbG9jayB7XG4gIHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgICByZXR1cm4gb2YoMClcbiAgICAgIC5waXBlKFxuICAgICAgICBleHBhbmQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGgucm91bmQoTWF0aC5hYnMobm93IC0gdGhlbikgLyAxMDAwKTtcblxuICAgICAgICAgIGNvbnN0IHBlcmlvZCA9XG4gICAgICAgICAgICBzZWNvbmRzIDwgTUlOVVRFXG4gICAgICAgICAgICAgID8gMTAwMFxuICAgICAgICAgICAgICA6IHNlY29uZHMgPCBIT1VSXG4gICAgICAgICAgICAgICAgPyAxMDAwICogTUlOVVRFXG4gICAgICAgICAgICAgICAgOiBzZWNvbmRzIDwgREFZXG4gICAgICAgICAgICAgICAgICA/IDEwMDAgKiBIT1VSXG4gICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgICByZXR1cm4gcGVyaW9kID8gdGltZXIocGVyaW9kKSA6IGVtcHR5KCk7XG4gICAgICAgIH0pLFxuICAgICAgICBza2lwKDEpXG4gICAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTdHJpbmdPckZuLCBOdW1iZXJBcnJheSB9IGZyb20gJy4vdGltZWFnby5mb3JtYXR0ZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIElMMTBuc1N0cmluZ3Mge1xuICBwcmVmaXhBZ28/OiBTdHJpbmdPckZuO1xuICBwcmVmaXhGcm9tTm93PzogU3RyaW5nT3JGbjtcbiAgc3VmZml4QWdvPzogU3RyaW5nT3JGbjtcbiAgc3VmZml4RnJvbU5vdz86IFN0cmluZ09yRm47XG4gIHNlY29uZD86IFN0cmluZ09yRm47XG4gIHNlY29uZHM/OiBTdHJpbmdPckZuO1xuICBtaW51dGU/OiBTdHJpbmdPckZuO1xuICBtaW51dGVzPzogU3RyaW5nT3JGbjtcbiAgaG91cj86IFN0cmluZ09yRm47XG4gIGhvdXJzPzogU3RyaW5nT3JGbjtcbiAgZGF5PzogU3RyaW5nT3JGbjtcbiAgZGF5cz86IFN0cmluZ09yRm47XG4gIHdlZWs/OiBTdHJpbmdPckZuO1xuICB3ZWVrcz86IFN0cmluZ09yRm47XG4gIG1vbnRoPzogU3RyaW5nT3JGbjtcbiAgbW9udGhzPzogU3RyaW5nT3JGbjtcbiAgeWVhcj86IFN0cmluZ09yRm47XG4gIHllYXJzPzogU3RyaW5nT3JGbjtcbiAgd29yZFNlcGFyYXRvcj86IHN0cmluZztcbiAgbnVtYmVycz86IE51bWJlckFycmF5O1xufTtcblxuLyoqXG4gKiBUbyBtb2RpZnkgdGhlIHRleHQgZGlzcGxheWVkLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgVGltZWFnb0ludGwgYW5kXG4gKiBpbmNsdWRlIGl0IGluIGEgY3VzdG9tIHByb3ZpZGVyXG4gKi9cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBUaW1lYWdvSW50bCB7XG5cbiAgc3RyaW5nczogSUwxMG5zU3RyaW5ncztcblxuICAvKipcbiAgICogU3RyZWFtIHRoYXQgZW1pdHMgd2hlbmV2ZXIgdGhlIGwxMG4gc3RyaW5ncyBhcmUgY2hhbmdlZFxuICAgKiBVc2UgdGhpcyB0byBub3RpZnkgZGlyZWN0aXZlcyBpZiB0aGUgbDEwbiBzdHJpbmdzIGhhdmUgY2hhbmdlZCBhZnRlciBpbml0aWFsaXphdGlvbi5cbiAgICovXG4gIHJlYWRvbmx5IGNoYW5nZXM6IFN1YmplY3Q8dm9pZD4gPSBuZXcgU3ViamVjdDx2b2lkPigpO1xufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRpbWVhZ29JbnRsIH0gZnJvbSAnLi90aW1lYWdvLmludGwnO1xuaW1wb3J0IHsgTUlOVVRFLCBIT1VSLCBEQVksIFdFRUssIE1PTlRILCBZRUFSIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IHR5cGUgVW5pdCA9ICdzZWNvbmQnIHwgJ21pbnV0ZScgfCAnaG91cicgfCAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcic7XG5cbmV4cG9ydCB0eXBlIFN1ZmZpeCA9ICdhZ28nIHwgJ2Zyb20gbm93JztcblxuZXhwb3J0IHR5cGUgU3RyaW5nT3JGbiA9ICgodmFsdWU6IG51bWJlciwgbWlsbGlzRGVsdGE6ICBudW1iZXIpID0+IHN0cmluZykgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIE51bWJlckFycmF5ID0gWyBzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZywgc3RyaW5nLCBzdHJpbmcgXTtcblxuY29uc3QgZGVmYXVsdEZvcm1hdHR0ZXIgPSBmdW5jdGlvbih0aGVuOiBudW1iZXIpOiB7dmFsdWU6IG51bWJlciwgdW5pdDogVW5pdCwgc3VmZml4OiBTdWZmaXh9IHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qgc2Vjb25kcyA9IE1hdGgucm91bmQoTWF0aC5hYnMobm93IC0gdGhlbikgLyAxMDAwKTtcbiAgY29uc3Qgc3VmZml4OiBTdWZmaXggPSB0aGVuIDwgbm93ID8gJ2FnbycgOiAnZnJvbSBub3cnO1xuXG4gIGNvbnN0IFt2YWx1ZSwgdW5pdF06IFtudW1iZXIsIFVuaXRdID1cbiAgICBzZWNvbmRzIDwgTUlOVVRFXG4gICAgICA/IFtNYXRoLnJvdW5kKHNlY29uZHMpLCAnc2Vjb25kJ11cbiAgICAgIDogc2Vjb25kcyA8IEhPVVJcbiAgICAgICAgPyBbTWF0aC5yb3VuZChzZWNvbmRzIC8gTUlOVVRFKSwgJ21pbnV0ZSddXG4gICAgICAgIDogc2Vjb25kcyA8IERBWVxuICAgICAgICAgID8gW01hdGgucm91bmQoc2Vjb25kcyAvIEhPVVIpLCAnaG91ciddXG4gICAgICAgICAgOiBzZWNvbmRzIDwgV0VFS1xuICAgICAgICAgICAgPyBbTWF0aC5yb3VuZChzZWNvbmRzIC8gREFZKSwgJ2RheSddXG4gICAgICAgICAgICA6IHNlY29uZHMgPCBNT05USFxuICAgICAgICAgICAgICA/IFtNYXRoLnJvdW5kKHNlY29uZHMgLyBXRUVLKSwgJ3dlZWsnXVxuICAgICAgICAgICAgICA6IHNlY29uZHMgPCBZRUFSXG4gICAgICAgICAgICAgICAgPyBbTWF0aC5yb3VuZChzZWNvbmRzIC8gTU9OVEgpLCAnbW9udGgnXVxuICAgICAgICAgICAgICAgIDogW01hdGgucm91bmQoc2Vjb25kcyAvIFlFQVIpLCAneWVhciddO1xuXG4gIHJldHVybiB7dmFsdWUsIHVuaXQsIHN1ZmZpeH07XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUaW1lYWdvRm9ybWF0dGVyIHtcbiAgYWJzdHJhY3QgZm9ybWF0KHRoZW46IG51bWJlcik6IHN0cmluZ1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVGltZWFnb0RlZmF1bHRGb3JtYXR0ZXIgZXh0ZW5kcyBUaW1lYWdvRm9ybWF0dGVyIHtcbiAgZm9ybWF0KHRoZW46IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3Qge3N1ZmZpeCwgdmFsdWUsIHVuaXR9ID0gZGVmYXVsdEZvcm1hdHR0ZXIodGhlbik7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UodmFsdWUsIHVuaXQsIHN1ZmZpeCk7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlKHZhbHVlOiBudW1iZXIsIHVuaXQ6IFVuaXQsIHN1ZmZpeDogU3VmZml4KTogc3RyaW5nIHtcbiAgICBpZiAodmFsdWUgIT09IDEpIHtcbiAgICAgIHVuaXQgKz0gJ3MnO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgKyAnICcgKyB1bml0ICsgJyAnICsgc3VmZml4O1xuICB9XG59XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBUaW1lYWdvQ3VzdG9tRm9ybWF0dGVyIGV4dGVuZHMgVGltZWFnb0Zvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW50bDogVGltZWFnb0ludGwpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgZm9ybWF0KHRoZW46IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3Qge3N1ZmZpeCwgdmFsdWUsIHVuaXR9ID0gZGVmYXVsdEZvcm1hdHR0ZXIodGhlbik7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UodmFsdWUsIHVuaXQsIHN1ZmZpeCwgRGF0ZS5ub3coKSwgdGhlbik7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlKHZhbHVlOiBudW1iZXIsIHVuaXQ6IFVuaXQsIHN1ZmZpeDogU3VmZml4LCBub3c6IG51bWJlciwgdGhlbjogbnVtYmVyKSB7XG4gICAgLyoqIGNvbnZlcnQgd2Vla3MgdG8gZGF5cyBpZiBzdHJpbmdzIGRvbid0IGhhbmRsZSB3ZWVrcyAqL1xuICAgIGlmICh1bml0ID09PSAnd2VlaycgJiYgIXRoaXMuaW50bC5zdHJpbmdzLndlZWsgJiYgIXRoaXMuaW50bC5zdHJpbmdzLndlZWtzKSB7XG4gICAgICBjb25zdCBkYXlzID0gTWF0aC5yb3VuZChNYXRoLmFicyhub3cgLSB0aGVuKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgICB2YWx1ZSA9IGRheXM7XG4gICAgICB1bml0ID0gJ2RheSc7XG4gICAgfVxuXG4gICAgLyoqIGNyZWF0ZSBhIG5vcm1hbGl6ZSBmdW5jdGlvbiBmb3IgZ2l2ZW4gdmFsdWUgKi9cbiAgICBjb25zdCBub3JtYWxpemUgPSB0aGlzLm5vcm1hbGl6ZUZuKHZhbHVlLCBub3cgLSB0aGVuLCB0aGlzLmludGwuc3RyaW5ncy5udW1iZXJzKTtcblxuICAgIC8qKiBUaGUgZXZlbnR1YWwgcmV0dXJuIHZhbHVlIHN0b3JlZCBpbiBhbiBhcnJheSBzbyB0aGF0IHRoZSB3b3JkU2VwYXJhdG9yIGNhbiBiZSB1c2VkICovXG4gICAgY29uc3QgZGF0ZVN0cmluZzogc3RyaW5nW10gPSBbXTtcblxuICAgIC8qKiBoYW5kbGUgcHJlZml4ZXMgKi9cbiAgICBpZiAoc3VmZml4ID09PSAnYWdvJyAmJiB0aGlzLmludGwuc3RyaW5ncy5wcmVmaXhBZ28pIHtcbiAgICAgIGRhdGVTdHJpbmcucHVzaChub3JtYWxpemUodGhpcy5pbnRsLnN0cmluZ3MucHJlZml4QWdvKSk7XG4gICAgfVxuICAgIGlmIChzdWZmaXggPT09ICdmcm9tIG5vdycgJiYgdGhpcy5pbnRsLnN0cmluZ3MucHJlZml4RnJvbU5vdykge1xuICAgICAgZGF0ZVN0cmluZy5wdXNoKG5vcm1hbGl6ZSh0aGlzLmludGwuc3RyaW5ncy5wcmVmaXhGcm9tTm93KSk7XG4gICAgfVxuXG4gICAgLyoqIEhhbmRsZSBNYWluIG51bWJlciBhbmQgdW5pdCAqL1xuICAgIGNvbnN0IGlzUGx1cmFsID0gdmFsdWUgPiAxO1xuICAgIGlmIChpc1BsdXJhbCkge1xuICAgICAgY29uc3Qgc3RyaW5nRm46IFN0cmluZ09yRm4gPSB0aGlzLmludGwuc3RyaW5nc1t1bml0ICsgJ3MnXSB8fCB0aGlzLmludGwuc3RyaW5nc1t1bml0XSB8fCAnJWQgJyArIHVuaXQ7XG4gICAgICBkYXRlU3RyaW5nLnB1c2gobm9ybWFsaXplKHN0cmluZ0ZuKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmluZ0ZuOiBTdHJpbmdPckZuID0gdGhpcy5pbnRsLnN0cmluZ3NbdW5pdF0gfHwgdGhpcy5pbnRsLnN0cmluZ3NbdW5pdCArICdzJ10gfHwgJyVkICcgKyB1bml0O1xuICAgICAgZGF0ZVN0cmluZy5wdXNoKG5vcm1hbGl6ZShzdHJpbmdGbikpO1xuICAgIH1cblxuICAgIC8qKiBIYW5kbGUgU3VmZml4ZXMgKi9cbiAgICBpZiAoc3VmZml4ID09PSAnYWdvJyAmJiB0aGlzLmludGwuc3RyaW5ncy5zdWZmaXhBZ28pIHtcbiAgICAgIGRhdGVTdHJpbmcucHVzaChub3JtYWxpemUodGhpcy5pbnRsLnN0cmluZ3Muc3VmZml4QWdvKSk7XG4gICAgfVxuICAgIGlmIChzdWZmaXggPT09ICdmcm9tIG5vdycgJiYgdGhpcy5pbnRsLnN0cmluZ3Muc3VmZml4RnJvbU5vdykge1xuICAgICAgZGF0ZVN0cmluZy5wdXNoKG5vcm1hbGl6ZSh0aGlzLmludGwuc3RyaW5ncy5zdWZmaXhGcm9tTm93KSk7XG4gICAgfVxuXG4gICAgLyoqIGpvaW4gdGhlIGFycmF5IGludG8gYSBzdHJpbmcgYW5kIHJldHVybiBpdCAqL1xuICAgIGNvbnN0IHdvcmRTZXBhcmF0b3IgPSB0eXBlb2YgdGhpcy5pbnRsLnN0cmluZ3Mud29yZFNlcGFyYXRvciA9PT0gJ3N0cmluZycgPyB0aGlzLmludGwuc3RyaW5ncy53b3JkU2VwYXJhdG9yIDogJyAnO1xuICAgIHJldHVybiBkYXRlU3RyaW5nLmpvaW4od29yZFNlcGFyYXRvcik7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIG51bWJlcnMgYXJyYXkgaXMgcHJlc2VudCwgZm9ybWF0IG51bWJlcnMgd2l0aCBpdCxcbiAgICogb3RoZXJ3aXNlIGp1c3QgY2FzdCB0aGUgbnVtYmVyIHRvIGEgc3RyaW5nIGFuZCByZXR1cm4gaXRcbiAgKi9cbiAgcHJpdmF0ZSBub3JtYWxpemVOdW1iZXIobnVtYmVyczogTnVtYmVyQXJyYXksIHZhbHVlOiBudW1iZXIpIHtcbiAgICByZXR1cm4gbnVtYmVycyAmJiBudW1iZXJzLmxlbmd0aCA9PT0gMTBcbiAgICAgID8gU3RyaW5nKHZhbHVlKS5zcGxpdCgnJylcbiAgICAgICAgICAubWFwKChkaWdpdDogc3RyaW5nKSA9PiBkaWdpdC5tYXRjaCgvXlswLTldJC8pID8gbnVtYmVyc1twYXJzZUludChkaWdpdCwgMTApXSA6IGRpZ2l0KVxuICAgICAgICAgIC5qb2luKCcnKVxuICAgICAgOiBTdHJpbmcodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2UgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIG51bWJlciBvZiBkYXlzIGFuZCByZXR1cm5zIGEgc3RyaW5nXG4gICAqIGFuZCBwcm92aWRlIGEgdW5pZm9ybSBBUEkgdG8gY3JlYXRlIHN0cmluZyBwYXJ0c1xuICAqL1xuICBwcml2YXRlIG5vcm1hbGl6ZUZuKHZhbHVlOiBudW1iZXIsIG1pbGxpc0RlbHRhOiBudW1iZXIsIG51bWJlcnM/OiBOdW1iZXJBcnJheSkge1xuICAgIHJldHVybiAoc3RyaW5nT3JGbjogU3RyaW5nT3JGbikgPT5cbiAgICAgIHR5cGVvZiBzdHJpbmdPckZuID09PSAnZnVuY3Rpb24nXG4gICAgICA/IHN0cmluZ09yRm4odmFsdWUsIG1pbGxpc0RlbHRhKS5yZXBsYWNlKC8lZC9nLCB0aGlzLm5vcm1hbGl6ZU51bWJlcihudW1iZXJzLCB2YWx1ZSkpXG4gICAgICA6IHN0cmluZ09yRm4ucmVwbGFjZSgvJWQvZywgdGhpcy5ub3JtYWxpemVOdW1iZXIobnVtYmVycywgdmFsdWUpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBJbnB1dCxcbiAgRWxlbWVudFJlZixcbiAgT3B0aW9uYWwsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBDaGFuZ2VEZXRlY3RvclJlZlxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgVGltZWFnb0Nsb2NrIH0gZnJvbSAnLi90aW1lYWdvLmNsb2NrJztcbmltcG9ydCB7IFRpbWVhZ29Gb3JtYXR0ZXIgfSBmcm9tICcuL3RpbWVhZ28uZm9ybWF0dGVyJztcbmltcG9ydCB7IFRpbWVhZ29JbnRsIH0gZnJvbSAnLi90aW1lYWdvLmludGwnO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBjb2VyY2VCb29sZWFuUHJvcGVydHksIGRhdGVQYXJzZXIgfSBmcm9tICcuL3V0aWwnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbdGltZWFnb10nLFxuICBleHBvcnRBczogJ3RpbWVhZ28nLFxufSlcbmV4cG9ydCBjbGFzcyBUaW1lYWdvRGlyZWN0aXZlIGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xuICBwcml2YXRlIGludGxTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcbiAgcHJpdmF0ZSBjbG9ja1N1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIC8qKlxuICAgKiBFbWl0cyBvbjpcbiAgICogLSBJbnB1dCBjaGFuZ2VcbiAgICogLSBJbnRsIGNoYW5nZVxuICAgKiAtIENsb2NrIHRpY2tcbiAgKi9cbiAgc3RhdGVDaGFuZ2VzID0gbmV3IFN1YmplY3Q8YW55PigpO1xuXG4gIC8qKiBUaGUgRGF0ZSB0byBkaXNwbGF5LiBBbiBhY3R1YWwgRGF0ZSBvYmplY3Qgb3Igc29tZXRoaW5nIHRoYXQgY2FuIGJlIGZlZCB0byBuZXcgRGF0ZS4gKi9cbiAgQElucHV0KClcbiAgZ2V0IGRhdGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0ZTtcbiAgfVxuICBzZXQgZGF0ZShkYXRlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9kYXRlID0gZGF0ZVBhcnNlcihkYXRlKS52YWx1ZU9mKCk7XG4gICAgaWYgKHRoaXMuX2RhdGUpIHtcbiAgICAgIGlmICh0aGlzLmNsb2NrU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xvY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9ja1N1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xvY2tTdWJzY3JpcHRpb24gPSB0aGlzLmNsb2NrLnRpY2soZGF0ZSlcbiAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+IHRoaXMubGl2ZSwgdGhpcykpXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBXcm9uZyBwYXJhbWV0ZXIgaW4gVGltZWFnb0RpcmVjdGl2ZS4gRXhwZWN0ZWQgYSB2YWxpZCBkYXRlLCByZWNlaXZlZDogJHtkYXRlfWApO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIF9kYXRlOiBudW1iZXI7XG5cbiAgLyoqIElmIHRoZSBkaXJlY3RpdmUgc2hvdWxkIHVwZGF0ZSBpdHNlbGYgb3ZlciB0aW1lICovXG4gIEBJbnB1dCgpXG4gIGdldCBsaXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9saXZlO1xuICB9XG4gIHNldCBsaXZlKGxpdmU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9saXZlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KGxpdmUpO1xuICB9XG4gIHByaXZhdGUgX2xpdmUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIGludGw6IFRpbWVhZ29JbnRsLFxuICAgICAgICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgICAgZm9ybWF0dGVyOiBUaW1lYWdvRm9ybWF0dGVyLFxuICAgICAgICAgICAgICBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgICAgICAgICAgICBwcml2YXRlIGNsb2NrOiBUaW1lYWdvQ2xvY2spIHtcbiAgICBpZiAoaW50bCkge1xuICAgICAgdGhpcy5pbnRsU3Vic2NyaXB0aW9uID0gaW50bC5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCkpO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5zZXRDb250ZW50KGVsZW1lbnQubmF0aXZlRWxlbWVudCwgZm9ybWF0dGVyLmZvcm1hdCh0aGlzLmRhdGUpKTtcbiAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpO1xuICB9XG5cbiAgc2V0Q29udGVudChub2RlOiBhbnksIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGlmIChpc0RlZmluZWQobm9kZS50ZXh0Q29udGVudCkpIHtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlLmRhdGEgPSBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmludGxTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuaW50bFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5pbnRsU3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5jbG9ja1N1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5jbG9ja1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgdGhpcy5jbG9ja1N1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMuY29tcGxldGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgSW5qZWN0YWJsZSxcbiAgT25EZXN0cm95LFxuICBQaXBlLFxuICBQaXBlVHJhbnNmb3JtLFxuICBPcHRpb25hbCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFRpbWVhZ29DbG9jayB9IGZyb20gJy4vdGltZWFnby5jbG9jayc7XG5pbXBvcnQgeyBUaW1lYWdvRm9ybWF0dGVyIH0gZnJvbSAnLi90aW1lYWdvLmZvcm1hdHRlcic7XG5pbXBvcnQgeyBUaW1lYWdvSW50bCB9IGZyb20gJy4vdGltZWFnby5pbnRsJztcbmltcG9ydCB7IGlzRGVmaW5lZCwgY29lcmNlQm9vbGVhblByb3BlcnR5LCBkYXRlUGFyc2VyIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoKVxuQFBpcGUoe1xuICBuYW1lOiAndGltZWFnbycsXG4gIHB1cmU6IGZhbHNlLCAvLyByZXF1aXJlZCB0byB1cGRhdGUgdGhlIHZhbHVlIHdoZW4gc3RhdGVDaGFuZ2VzIGVtaXRzXG59KVxuZXhwb3J0IGNsYXNzIFRpbWVhZ29QaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSwgT25EZXN0cm95IHtcbiAgcHJpdmF0ZSBpbnRsU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgY2xvY2tTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBwcml2YXRlIGRhdGU6IG51bWJlcjtcbiAgcHJpdmF0ZSB2YWx1ZTogc3RyaW5nO1xuICBwcml2YXRlIGxpdmUgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBFbWl0cyBvbjpcbiAgICogLSBJbnB1dCBjaGFuZ2VcbiAgICogLSBJbnRsIGNoYW5nZVxuICAgKiAtIENsb2NrIHRpY2tcbiAgKi9cbiAgc3RhdGVDaGFuZ2VzID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBpbnRsOiBUaW1lYWdvSW50bCxcbiAgICBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBmb3JtYXR0ZXI6IFRpbWVhZ29Gb3JtYXR0ZXIsXG4gICAgcHJpdmF0ZSBjbG9jazogVGltZWFnb0Nsb2NrKSB7XG4gICAgaWYgKGludGwpIHtcbiAgICAgIHRoaXMuaW50bFN1YnNjcmlwdGlvbiA9IGludGwuY2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4gdGhpcy5zdGF0ZUNoYW5nZXMubmV4dCgpKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMudmFsdWUgPSBmb3JtYXR0ZXIuZm9ybWF0KHRoaXMuZGF0ZSk7XG4gICAgICBjZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRyYW5zZm9ybShkYXRlOiBudW1iZXIsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgY29uc3QgX2RhdGUgPSBkYXRlUGFyc2VyKGRhdGUpLnZhbHVlT2YoKTtcbiAgICBsZXQgX2xpdmU6IGJvb2xlYW47XG5cbiAgICBfbGl2ZSA9IGlzRGVmaW5lZChhcmdzWzBdKVxuICAgICAgPyBjb2VyY2VCb29sZWFuUHJvcGVydHkoYXJnc1swXSlcbiAgICAgIDogdGhpcy5saXZlO1xuXG4gICAgaWYgKHRoaXMuZGF0ZSA9PT0gX2RhdGUgJiYgdGhpcy5saXZlID09PSBfbGl2ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5kYXRlID0gX2RhdGU7XG4gICAgdGhpcy5saXZlID0gX2xpdmU7XG5cbiAgICBpZiAodGhpcy5kYXRlKSB7XG4gICAgICBpZiAodGhpcy5jbG9ja1N1YnNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmNsb2NrU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvY2tTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLmNsb2NrU3Vic2NyaXB0aW9uID0gdGhpcy5jbG9jay50aWNrKGRhdGUpXG4gICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLmxpdmUsIHRoaXMpKVxuICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuc3RhdGVDaGFuZ2VzLm5leHQoKSk7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlcy5uZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgV3JvbmcgcGFyYW1ldGVyIGluIFRpbWVhZ29QaXBlLiBFeHBlY3RlZCBhIHZhbGlkIGRhdGUsIHJlY2VpdmVkOiAke2RhdGV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5pbnRsU3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmludGxTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuaW50bFN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2xvY2tTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuY2xvY2tTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRoaXMuY2xvY2tTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VzLmNvbXBsZXRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzLCBQcm92aWRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGltZWFnb0RpcmVjdGl2ZSB9IGZyb20gJy4vdGltZWFnby5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGltZWFnb1BpcGUgfSBmcm9tICcuL3RpbWVhZ28ucGlwZSc7XG5pbXBvcnQgeyBUaW1lYWdvSW50bCB9IGZyb20gJy4vdGltZWFnby5pbnRsJztcbmltcG9ydCB7IFRpbWVhZ29DbG9jaywgVGltZWFnb0RlZmF1bHRDbG9jayB9IGZyb20gJy4vdGltZWFnby5jbG9jayc7XG5pbXBvcnQgeyBUaW1lYWdvRm9ybWF0dGVyLCBUaW1lYWdvRGVmYXVsdEZvcm1hdHRlciB9IGZyb20gJy4vdGltZWFnby5mb3JtYXR0ZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVhZ29Nb2R1bGVDb25maWcge1xuICBjbG9jaz86IFByb3ZpZGVyO1xuICBpbnRsPzogUHJvdmlkZXI7XG4gIGZvcm1hdHRlcj86IFByb3ZpZGVyO1xufVxuXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBUaW1lYWdvRGlyZWN0aXZlLFxuICAgIFRpbWVhZ29QaXBlLFxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgVGltZWFnb0RpcmVjdGl2ZSxcbiAgICBUaW1lYWdvUGlwZSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgVGltZWFnb01vZHVsZSB7XG4gIC8qKlxuICAgKiBVc2UgdGhpcyBtZXRob2QgaW4geW91ciByb290IG1vZHVsZSB0byBwcm92aWRlIHRoZSBUaW1lYWdvTW9kdWxlXG4gICAqL1xuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IFRpbWVhZ29Nb2R1bGVDb25maWcgPSB7fSk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogVGltZWFnb01vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICBjb25maWcuY2xvY2sgfHwge3Byb3ZpZGU6IFRpbWVhZ29DbG9jaywgdXNlQ2xhc3M6IFRpbWVhZ29EZWZhdWx0Q2xvY2t9LFxuICAgICAgICBjb25maWcuaW50bCB8fCBbXSxcbiAgICAgICAgY29uZmlnLmZvcm1hdHRlciB8fCB7cHJvdmlkZTogVGltZWFnb0Zvcm1hdHRlciwgdXNlQ2xhc3M6IFRpbWVhZ29EZWZhdWx0Rm9ybWF0dGVyfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgdGhpcyBtZXRob2QgaW4geW91ciBvdGhlciAobm9uIHJvb3QpIG1vZHVsZXMgdG8gaW1wb3J0IHRoZSBkaXJlY3RpdmUvcGlwZVxuICAgKi9cbiAgc3RhdGljIGZvckNoaWxkKGNvbmZpZzogVGltZWFnb01vZHVsZUNvbmZpZyA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBUaW1lYWdvTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIGNvbmZpZy5jbG9jayB8fCB7cHJvdmlkZTogVGltZWFnb0Nsb2NrLCB1c2VDbGFzczogVGltZWFnb0RlZmF1bHRDbG9ja30sXG4gICAgICAgIGNvbmZpZy5pbnRsIHx8IFtdLFxuICAgICAgICBjb25maWcuZm9ybWF0dGVyIHx8IHtwcm92aWRlOiBUaW1lYWdvRm9ybWF0dGVyLCB1c2VDbGFzczogVGltZWFnb0RlZmF1bHRGb3JtYXR0ZXJ9LFxuICAgICAgXSxcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsidHNsaWJfMS5fX2V4dGVuZHMiLCJvZiIsImV4cGFuZCIsInRpbWVyIiwiZW1wdHkiLCJza2lwIiwiSW5qZWN0YWJsZSIsIlN1YmplY3QiLCJmaWx0ZXIiLCJEaXJlY3RpdmUiLCJPcHRpb25hbCIsIkNoYW5nZURldGVjdG9yUmVmIiwiRWxlbWVudFJlZiIsIklucHV0IiwiUGlwZSIsIk5nTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7SUFBQTs7Ozs7Ozs7Ozs7Ozs7SUFjQTtJQUVBLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQyxjQUFjO1NBQ3BDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxZQUFZLEtBQUssSUFBSSxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzVFLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUM7WUFBRSxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO2dCQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBRS9FLHVCQUEwQixDQUFDLEVBQUUsQ0FBQztRQUMxQixhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BCLGdCQUFnQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBQ3ZDLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxLQUFLLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDekYsQ0FBQztBQUVELG9CQXFGdUIsQ0FBQyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLEdBQUcsT0FBTyxNQUFNLEtBQUssVUFBVSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLENBQUM7WUFBRSxPQUFPLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqQyxJQUFJO1lBQ0EsT0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSTtnQkFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM5RTtRQUNELE9BQU8sS0FBSyxFQUFFO1lBQUUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO1NBQUU7Z0JBQy9CO1lBQ0osSUFBSTtnQkFDQSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BEO29CQUNPO2dCQUFFLElBQUksQ0FBQztvQkFBRSxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUM7YUFBRTtTQUNwQztRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ2QsQ0FBQztBQUVEO1FBQ0ksS0FBSyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUU7WUFDOUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDOzs7Ozs7Ozs7O0FDcElELHVCQUEwQixLQUFVO1FBQ2xDLE9BQU8sT0FBTyxLQUFLLEtBQUssV0FBVyxJQUFJLEtBQUssS0FBSyxJQUFJLENBQUM7S0FDdkQ7Ozs7O0FBRUQsbUNBQXNDLEtBQVU7UUFDOUMsT0FBTyxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUcsS0FBTyxLQUFLLE9BQU8sQ0FBQztLQUNoRDs7Ozs7QUFFRCx3QkFBMkIsSUFBUztRQUNsQyxxQkFBTSxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUU7WUFDbkMsT0FBTyxNQUFNLENBQUM7U0FDZjtRQUVELHFCQUFNLEtBQUssR0FBYSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25ELElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtZQUN2QyxPQUFPLE1BQU0sQ0FBQztTQUNmO2FBQU07WUFDTCxzRUFBTyxjQUFNLEVBQUUsZUFBTyxFQUFFLG9CQUFTLENBQW9DO1lBQ3JFLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLFlBQUssTUFBTSxFQUFFLE9BQU8sR0FBRyxDQUFDLEdBQUssTUFBTSxHQUFFLENBQUM7U0FDM0Q7S0FDRjtBQUVELElBQU8scUJBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUN6QixJQUFPLHFCQUFNLElBQUksR0FBRyxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ2hDLElBQU8scUJBQU0sR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDN0IsSUFBTyxxQkFBTSxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUM1QixJQUFPLHFCQUFNLEtBQUssR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQzlCLElBQU8scUJBQU0sSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7Ozs7Ozs7OztBQ3ZCOUI7O1FBQUE7OzsyQkFMQTtRQU9DLENBQUE7O1FBR3dDQSx1Q0FBWTs7Ozs7Ozs7UUFDbkQsa0NBQUk7Ozs7WUFBSixVQUFLLElBQVk7Z0JBQ2YsT0FBT0MsT0FBRSxDQUFDLENBQUMsQ0FBQztxQkFDVCxJQUFJLENBQ0hDLGdCQUFNLENBQUM7b0JBQ0wscUJBQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztvQkFDdkIscUJBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7b0JBRXhELHFCQUFNLE1BQU0sR0FDVixPQUFPLEdBQUcsTUFBTTswQkFDWixJQUFJOzBCQUNKLE9BQU8sR0FBRyxJQUFJOzhCQUNaLElBQUksR0FBRyxNQUFNOzhCQUNiLE9BQU8sR0FBRyxHQUFHO2tDQUNYLElBQUksR0FBRyxJQUFJO2tDQUNYLENBQUMsQ0FBQztvQkFFWixPQUFPLE1BQU0sR0FBR0MsVUFBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHQyxVQUFLLEVBQUUsQ0FBQztpQkFDekMsQ0FBQyxFQUNGQyxjQUFJLENBQUMsQ0FBQyxDQUFDLENBQ1IsQ0FBQzthQUNMOztvQkF0QkZDLGVBQVU7O2tDQVRYO01BVXlDLFlBQVk7Ozs7OztBQ1ZyRDs7Ozs7Ozs7OzsyQkF3Q29DLElBQUlDLFlBQU8sRUFBUTs7O29CQVR0REQsZUFBVTs7MEJBL0JYOzs7Ozs7O0lDWUEscUJBQU0saUJBQWlCLEdBQUcsVUFBUyxJQUFZO1FBQzdDLHFCQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdkIscUJBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDeEQscUJBQU0sTUFBTSxHQUFXLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLFVBQVUsQ0FBQztRQUV2RDs7Ozs7Ozs7Ozs7OzRFQUFPLGFBQUssRUFBRSxZQUFJLENBYW1DO1FBRXJELE9BQU8sRUFBQyxLQUFLLE9BQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxNQUFNLFFBQUEsRUFBQyxDQUFDO0tBQzlCLENBQUE7Ozs7QUFFRDs7UUFBQTs7OytCQW5DQTtRQXFDQyxDQUFBOztRQUc0Q04sMkNBQWdCOzs7Ozs7OztRQUMzRCx3Q0FBTTs7OztZQUFOLFVBQU8sSUFBWTtnQkFDakIsa0NBQU8sa0JBQU0sRUFBRSxnQkFBSyxFQUFFLGNBQUksQ0FBNEI7Z0JBQ3RELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQ3hDOzs7Ozs7O1FBRU8sdUNBQUs7Ozs7OztzQkFBQyxLQUFhLEVBQUUsSUFBVSxFQUFFLE1BQWM7Z0JBQ3JELElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtvQkFDZixJQUFJLElBQUksR0FBRyxDQUFDO2lCQUNiO2dCQUNELE9BQU8sS0FBSyxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQzs7O29CQVg1Q00sZUFBVTs7c0NBdkNYO01Bd0M2QyxnQkFBZ0I7O1FBZWpCTiwwQ0FBZ0I7UUFDMUQsZ0NBQW9CLElBQWlCO1lBQXJDLFlBQ0UsaUJBQU8sU0FDUjtZQUZtQixVQUFJLEdBQUosSUFBSSxDQUFhOztTQUVwQzs7Ozs7UUFFRCx1Q0FBTTs7OztZQUFOLFVBQU8sSUFBWTtnQkFDakIsa0NBQU8sa0JBQU0sRUFBRSxnQkFBSyxFQUFFLGNBQUksQ0FBNEI7Z0JBQ3RELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDMUQ7Ozs7Ozs7OztRQUVPLHNDQUFLOzs7Ozs7OztzQkFBQyxLQUFhLEVBQUUsSUFBVSxFQUFFLE1BQWMsRUFBRSxHQUFXLEVBQUUsSUFBWTs7Z0JBRWhGLElBQUksSUFBSSxLQUFLLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRTtvQkFDMUUscUJBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDdEUsS0FBSyxHQUFHLElBQUksQ0FBQztvQkFDYixJQUFJLEdBQUcsS0FBSyxDQUFDO2lCQUNkOzs7O2dCQUdELHFCQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDOzs7O2dCQUdqRixxQkFBTSxVQUFVLEdBQWEsRUFBRSxDQUFDOztnQkFHaEMsSUFBSSxNQUFNLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRTtvQkFDbkQsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztpQkFDekQ7Z0JBQ0QsSUFBSSxNQUFNLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRTtvQkFDNUQsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztpQkFDN0Q7Ozs7Z0JBR0QscUJBQU0sUUFBUSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQzNCLElBQUksUUFBUSxFQUFFO29CQUNaLHFCQUFNLFFBQVEsR0FBZSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztvQkFDdEcsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztpQkFDdEM7cUJBQU07b0JBQ0wscUJBQU0sUUFBUSxHQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO29CQUN0RyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2lCQUN0Qzs7Z0JBR0QsSUFBSSxNQUFNLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRTtvQkFDbkQsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztpQkFDekQ7Z0JBQ0QsSUFBSSxNQUFNLEtBQUssVUFBVSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRTtvQkFDNUQsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztpQkFDN0Q7Ozs7Z0JBR0QscUJBQU0sYUFBYSxHQUFHLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxLQUFLLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDO2dCQUNsSCxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7Ozs7Ozs7OztRQU9oQyxnREFBZTs7Ozs7OztzQkFBQyxPQUFvQixFQUFFLEtBQWE7Z0JBQ3pELE9BQU8sT0FBTyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssRUFBRTtzQkFDbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7eUJBQ3BCLEdBQUcsQ0FBQyxVQUFDLEtBQWEsSUFBSyxPQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUEsQ0FBQzt5QkFDckYsSUFBSSxDQUFDLEVBQUUsQ0FBQztzQkFDWCxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Ozs7Ozs7Ozs7UUFPWiw0Q0FBVzs7Ozs7Ozs7c0JBQUMsS0FBYSxFQUFFLFdBQW1CLEVBQUUsT0FBcUI7O2dCQUMzRSxPQUFPLFVBQUMsVUFBc0I7b0JBQzVCLE9BQUEsT0FBTyxVQUFVLEtBQUssVUFBVTswQkFDOUIsVUFBVSxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDOzBCQUNuRixVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztpQkFBQSxDQUFDOzs7b0JBNUV2RU0sZUFBVTs7Ozs7d0JBckRGLFdBQVc7OztxQ0FEcEI7TUF1RDRDLGdCQUFnQjs7Ozs7O0FDdkQ1RDtRQWdFRSwwQkFBd0IsSUFBaUIsRUFDckIsSUFDUixTQUEyQixFQUMzQixPQUFtQixFQUNYO1lBSnBCLGlCQVlDO1lBWG1CLE9BQUUsR0FBRixFQUFFO1lBR0YsVUFBSyxHQUFMLEtBQUs7Ozs7Ozs7Z0NBckNWLElBQUlDLFlBQU8sRUFBTzt5QkErQmpCLElBQUk7WUFPbEIsSUFBSSxJQUFJLEVBQUU7Z0JBQ1IsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFBLENBQUMsQ0FBQzthQUNoRjtZQUNELElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO2dCQUMxQixLQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDcEUsS0FBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQzthQUN4QixDQUFDLENBQUM7U0FDSjtRQTFDRCxzQkFDSSxrQ0FBSTs7Ozs7Z0JBRFI7Z0JBRUUsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ25COzs7O2dCQUNELFVBQVMsSUFBWTtnQkFBckIsaUJBYUM7Z0JBWkMsSUFBSSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3hDLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtvQkFDZCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTt3QkFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO3dCQUNyQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsU0FBUyxDQUFDO3FCQUNwQztvQkFDRCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO3lCQUMzQyxJQUFJLENBQUNDLGdCQUFNLENBQUMsY0FBTSxPQUFBLEtBQUksQ0FBQyxJQUFJLEdBQUEsRUFBRSxJQUFJLENBQUMsQ0FBQzt5QkFDbkMsU0FBUyxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFBLENBQUMsQ0FBQztpQkFDOUM7cUJBQU07b0JBQ0wsTUFBTSxJQUFJLFdBQVcsQ0FBQywyRUFBeUUsSUFBTSxDQUFDLENBQUM7aUJBQ3hHO2FBQ0Y7OztXQWRBO1FBa0JELHNCQUNJLGtDQUFJOzs7OztnQkFEUjtnQkFFRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7YUFDbkI7Ozs7Z0JBQ0QsVUFBUyxJQUFhO2dCQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzFDOzs7V0FIQTs7Ozs7UUFvQkQsc0NBQVc7Ozs7WUFBWCxVQUFZLE9BQXNCO2dCQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO2FBQzFCOzs7Ozs7UUFFRCxxQ0FBVTs7Ozs7WUFBVixVQUFXLElBQVMsRUFBRSxPQUFlO2dCQUNuQyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7b0JBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO2lCQUM1QjtxQkFBTTtvQkFDTCxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztpQkFDckI7YUFDRjs7OztRQUVELHNDQUFXOzs7WUFBWDtnQkFDRSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtvQkFDekIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxDQUFDO29CQUNwQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsU0FBUyxDQUFDO2lCQUNuQztnQkFDRCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtvQkFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO29CQUNyQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsU0FBUyxDQUFDO2lCQUNwQztnQkFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO2FBQzlCOztvQkFuRkZDLGNBQVMsU0FBQzt3QkFDVCxRQUFRLEVBQUUsV0FBVzt3QkFDckIsUUFBUSxFQUFFLFNBQVM7cUJBQ3BCOzs7Ozt3QkFOUSxXQUFXLHVCQWtETEMsYUFBUTt3QkF4RHJCQyxzQkFBaUI7d0JBS1YsZ0JBQWdCO3dCQVZ2QkMsZUFBVTt3QkFTSCxZQUFZOzs7OzJCQXNCbEJDLFVBQUs7MkJBcUJMQSxVQUFLOzsrQkF2RFI7Ozs7Ozs7QUNBQTtRQW9DRSxxQkFBd0IsSUFBaUIsRUFDdkMsRUFBcUIsRUFDYixXQUNBO1lBSFYsaUJBV0M7WUFUUyxjQUFTLEdBQVQsU0FBUztZQUNULFVBQUssR0FBTCxLQUFLO3dCQWJBLElBQUk7Ozs7Ozs7Z0NBUUosSUFBSU4sWUFBTyxFQUFRO1lBTWhDLElBQUksSUFBSSxFQUFFO2dCQUNSLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsR0FBQSxDQUFDLENBQUM7YUFDaEY7WUFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQztnQkFDMUIsS0FBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDekMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO2FBQ25CLENBQUMsQ0FBQztTQUNKOzs7Ozs7UUFFRCwrQkFBUzs7Ozs7WUFBVCxVQUFVLElBQVk7Z0JBQXRCLGlCQTZCQztnQkE3QnVCLGNBQWM7cUJBQWQsVUFBYyxFQUFkLHFCQUFjLEVBQWQsSUFBYztvQkFBZCw2QkFBYzs7Z0JBQ3BDLHFCQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3pDLHFCQUFJLEtBQWMsQ0FBQztnQkFFbkIsS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7c0JBQ3RCLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztzQkFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQztnQkFFZCxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssS0FBSyxFQUFFO29CQUM5QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7aUJBQ25CO2dCQUVELElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO2dCQUNsQixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztnQkFFbEIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO29CQUNiLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO3dCQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7d0JBQ3JDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxTQUFTLENBQUM7cUJBQ3BDO29CQUNELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7eUJBQzNDLElBQUksQ0FBQ0MsZ0JBQU0sQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLElBQUksR0FBQSxFQUFFLElBQUksQ0FBQyxDQUFDO3lCQUNuQyxTQUFTLENBQUMsY0FBTSxPQUFBLEtBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLEdBQUEsQ0FBQyxDQUFDO29CQUM3QyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO2lCQUMxQjtxQkFBTTtvQkFDTCxNQUFNLElBQUksV0FBVyxDQUFDLHNFQUFvRSxJQUFNLENBQUMsQ0FBQztpQkFDbkc7Z0JBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ25COzs7O1FBRUQsaUNBQVc7OztZQUFYO2dCQUNFLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO29CQUN6QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQ3BDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxTQUFTLENBQUM7aUJBQ25DO2dCQUNELElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO29CQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQ3JDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxTQUFTLENBQUM7aUJBQ3BDO2dCQUNELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDOUI7O29CQTNFRkYsZUFBVTtvQkFDVlEsU0FBSSxTQUFDO3dCQUNKLElBQUksRUFBRSxTQUFTO3dCQUNmLElBQUksRUFBRSxLQUFLO3FCQUNaOzs7Ozt3QkFSUSxXQUFXLHVCQXlCTEosYUFBUTt3QkE5QnJCQyxzQkFBaUI7d0JBSVYsZ0JBQWdCO3dCQURoQixZQUFZOzs7MEJBVHJCOzs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7O1FBMkJTLHFCQUFPOzs7OztZQUFkLFVBQWUsTUFBZ0M7Z0JBQWhDLHVCQUFBO29CQUFBLFdBQWdDOztnQkFDN0MsT0FBTztvQkFDTCxRQUFRLEVBQUUsYUFBYTtvQkFDdkIsU0FBUyxFQUFFO3dCQUNULE1BQU0sQ0FBQyxLQUFLLElBQUksRUFBQyxPQUFPLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxtQkFBbUIsRUFBQzt3QkFDdEUsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFO3dCQUNqQixNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSx1QkFBdUIsRUFBQztxQkFDbkY7aUJBQ0YsQ0FBQzthQUNIOzs7Ozs7Ozs7UUFLTSxzQkFBUTs7Ozs7WUFBZixVQUFnQixNQUFnQztnQkFBaEMsdUJBQUE7b0JBQUEsV0FBZ0M7O2dCQUM5QyxPQUFPO29CQUNMLFFBQVEsRUFBRSxhQUFhO29CQUN2QixTQUFTLEVBQUU7d0JBQ1QsTUFBTSxDQUFDLEtBQUssSUFBSSxFQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLG1CQUFtQixFQUFDO3dCQUN0RSxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUU7d0JBQ2pCLE1BQU0sQ0FBQyxTQUFTLElBQUksRUFBQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLHVCQUF1QixFQUFDO3FCQUNuRjtpQkFDRixDQUFDO2FBQ0g7O29CQXJDRkksYUFBUSxTQUFDO3dCQUNSLFlBQVksRUFBRTs0QkFDWixnQkFBZ0I7NEJBQ2hCLFdBQVc7eUJBQ1o7d0JBQ0QsT0FBTyxFQUFFOzRCQUNQLGdCQUFnQjs0QkFDaEIsV0FBVzt5QkFDWjtxQkFDRjs7NEJBdEJEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyJ9