/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Injectable } from '@angular/core';
import { of, empty, timer } from 'rxjs';
import { expand, skip } from 'rxjs/operators';
import { MINUTE, HOUR, DAY } from './util';
/**
 * @abstract
 */
export class TimeagoClock {
}
function TimeagoClock_tsickle_Closure_declarations() {
    /**
     * @abstract
     * @param {?} then
     * @return {?}
     */
    TimeagoClock.prototype.tick = function (then) { };
}
export class TimeagoDefaultClock extends TimeagoClock {
    /**
     * @param {?} then
     * @return {?}
     */
    tick(then) {
        return of(0)
            .pipe(expand(() => {
            const /** @type {?} */ now = Date.now();
            const /** @type {?} */ seconds = Math.round(Math.abs(now - then) / 1000);
            const /** @type {?} */ period = seconds < MINUTE
                ? 1000
                : seconds < HOUR
                    ? 1000 * MINUTE
                    : seconds < DAY
                        ? 1000 * HOUR
                        : 0;
            return period ? timer(period) : empty();
        }), skip(1));
    }
}
TimeagoDefaultClock.decorators = [
    { type: Injectable },
];

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZWFnby5jbG9jay5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC10aW1lYWdvLyIsInNvdXJjZXMiOlsidGltZWFnby5jbG9jay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQWMsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDcEQsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQXFCLE1BQU0sUUFBUSxDQUFDOzs7O0FBRTlELE1BQU07Q0FFTDs7Ozs7Ozs7O0FBR0QsTUFBTSwwQkFBMkIsU0FBUSxZQUFZOzs7OztJQUNuRCxJQUFJLENBQUMsSUFBWTtRQUNmLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ1QsSUFBSSxDQUNILE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDVix1QkFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLHVCQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1lBRXhELHVCQUFNLE1BQU0sR0FDVixPQUFPLEdBQUcsTUFBTTtnQkFDZCxDQUFDLENBQUMsSUFBSTtnQkFDTixDQUFDLENBQUMsT0FBTyxHQUFHLElBQUk7b0JBQ2QsQ0FBQyxDQUFDLElBQUksR0FBRyxNQUFNO29CQUNmLENBQUMsQ0FBQyxPQUFPLEdBQUcsR0FBRzt3QkFDYixDQUFDLENBQUMsSUFBSSxHQUFHLElBQUk7d0JBQ2IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVaLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDekMsQ0FBQyxFQUNGLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDUixDQUFDO0tBQ0w7OztZQXRCRixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YsIGVtcHR5LCB0aW1lciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZXhwYW5kLCBza2lwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTUlOVVRFLCBIT1VSLCBEQVksIFdFRUssIE1PTlRILCBZRUFSIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRpbWVhZ29DbG9jayB7XG4gIGFic3RyYWN0IHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+O1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVGltZWFnb0RlZmF1bHRDbG9jayBleHRlbmRzIFRpbWVhZ29DbG9jayB7XG4gIHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgICByZXR1cm4gb2YoMClcbiAgICAgIC5waXBlKFxuICAgICAgICBleHBhbmQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGgucm91bmQoTWF0aC5hYnMobm93IC0gdGhlbikgLyAxMDAwKTtcblxuICAgICAgICAgIGNvbnN0IHBlcmlvZCA9XG4gICAgICAgICAgICBzZWNvbmRzIDwgTUlOVVRFXG4gICAgICAgICAgICAgID8gMTAwMFxuICAgICAgICAgICAgICA6IHNlY29uZHMgPCBIT1VSXG4gICAgICAgICAgICAgICAgPyAxMDAwICogTUlOVVRFXG4gICAgICAgICAgICAgICAgOiBzZWNvbmRzIDwgREFZXG4gICAgICAgICAgICAgICAgICA/IDEwMDAgKiBIT1VSXG4gICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgICByZXR1cm4gcGVyaW9kID8gdGltZXIocGVyaW9kKSA6IGVtcHR5KCk7XG4gICAgICAgIH0pLFxuICAgICAgICBza2lwKDEpXG4gICAgICApO1xuICB9XG59XG4iXX0=